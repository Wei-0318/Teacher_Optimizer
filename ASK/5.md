å¥½å•é¡Œï¼åœ¨ Dify ä¸­ Array ç¢ºå¯¦æœ‰ä¸åŒçš„å­é¡å‹ã€‚è®“æˆ‘å‘Šè¨´ä½ å¦‚ä½•é¸æ“‡ï¼š

## ğŸ“Š **Array é¡å‹é¸æ“‡æŒ‡å—**

### **Dify çš„ Array å››ç¨®é¡å‹ï¼š**

1. **Array[String]** - å­—ä¸²é™£åˆ—
2. **Array[Number]** - æ•¸å­—é™£åˆ—  
3. **Array[Object]** - ç‰©ä»¶é™£åˆ—
4. **Array[File]** - æª”æ¡ˆé™£åˆ—

---

## **é‡å°ä½ çš„ä»£ç¢¼ï¼Œæ‡‰è©²é€™æ¨£é¸æ“‡ï¼š**

### **`extended_questions_list` â†’ Array[String]**

```python
"extended_questions_list": [
    q['question'] for q in data['extended_questions']
]
# è¼¸å‡ºç¯„ä¾‹: ["å•é¡Œ1", "å•é¡Œ2", "å•é¡Œ3"]
# é€™æ˜¯å­—ä¸²é™£åˆ— âœ“
```

**é¸æ“‡ï¼šArray[String]**

---

## **å®Œæ•´çš„è¼¸å‡ºè®Šæ•¸é¡å‹å°ç…§è¡¨ï¼š**

```yaml
è¼¸å‡ºè®Šæ•¸é…ç½®ï¼š

1. status
   é¡å‹: String
   èªªæ˜: "success" æˆ– "error"

2. main_question  
   é¡å‹: String
   èªªæ˜: å„ªåŒ–å¾Œçš„ä¸»è¦å•é¡Œæ–‡å­—

3. formatted_output
   é¡å‹: String  
   èªªæ˜: æ ¼å¼åŒ–å¾Œçš„é¡¯ç¤ºæ–‡å­—

4. extended_questions_list
   é¡å‹: Array[String] â† é¸é€™å€‹
   èªªæ˜: å»¶ä¼¸å•é¡Œçš„å­—ä¸²é™£åˆ—

5. parsed_data
   é¡å‹: Object
   èªªæ˜: å®Œæ•´çš„JSONç‰©ä»¶

6. error_message (å¯é¸)
   é¡å‹: String
   èªªæ˜: éŒ¯èª¤è¨Šæ¯

7. raw_output (å¯é¸)
   é¡å‹: String
   èªªæ˜: åŸå§‹è¼¸å‡ºå…§å®¹
```

---

## **å¦‚ä½•åˆ¤æ–·è¦é¸å“ªç¨® Arrayï¼Ÿ**

### **çœ‹ä»£ç¢¼ä¸­ return çš„å…§å®¹ï¼š**

#### **Array[String] - å­—ä¸²é™£åˆ—**
```python
# ç¯„ä¾‹
["å•é¡Œ1", "å•é¡Œ2", "å•é¡Œ3"]
["é ˜åŸŸA", "é ˜åŸŸB", "é ˜åŸŸC"]

# ä½ çš„ä»£ç¢¼ä¸­ï¼š
"extended_questions_list": ["...", "...", "..."]  â† é€™å€‹
```

#### **Array[Number] - æ•¸å­—é™£åˆ—**
```python
# ç¯„ä¾‹
[85, 90, 75, 88]
[1, 2, 3, 4, 5]
```

#### **Array[Object] - ç‰©ä»¶é™£åˆ—**
```python
# ç¯„ä¾‹
[
    {"name": "å­¸ç”ŸA", "score": 85},
    {"name": "å­¸ç”ŸB", "score": 90}
]

# å¦‚æœä½ æƒ³ä¿ç•™å®Œæ•´çš„å»¶ä¼¸å•é¡Œè³‡è¨Šï¼š
"extended_questions_full": [
    {
        "perspective": "ç†è«–åŸºç¤",
        "question": "...",
        "learning_value": "..."
    },
    ...
]  â† é€™ç¨®æƒ…æ³é¸ Array[Object]
```

#### **Array[File] - æª”æ¡ˆé™£åˆ—**
```python
# ç¯„ä¾‹
[file1.pdf, file2.jpg]
# é€šå¸¸ç”¨æ–¼æª”æ¡ˆä¸Šå‚³/è™•ç†
```

---

## **å¦‚æœä½ æƒ³è¦æ›´è±å¯Œçš„è³‡è¨Šï¼š**

å¯ä»¥ä¿®æ”¹ä»£ç¢¼ï¼ŒåŒæ™‚è¿”å›å…©ç¨®æ ¼å¼ï¼š

```python
def main(teacher_output: str) -> dict:
    # ... å‰é¢çš„ä»£ç¢¼ä¸è®Š ...
    
    return {
        "status": "success",
        "parsed_data": data,
        "main_question": data['optimized_question']['refined_version'],
        
        # ç°¡å–®ç‰ˆæœ¬ - Array[String]
        "extended_questions_list": [
            q['question'] for q in data['extended_questions']
        ],
        
        # å®Œæ•´ç‰ˆæœ¬ - Array[Object]
        "extended_questions_full": data['extended_questions'],
        
        "formatted_output": format_for_display(data)
    }
```

é€™æ¨£è¼¸å‡ºè®Šæ•¸å°±æœƒæœ‰ï¼š
```yaml
extended_questions_list: Array[String]
  ç¯„ä¾‹: ["å•é¡Œ1", "å•é¡Œ2"]
  
extended_questions_full: Array[Object]  
  ç¯„ä¾‹: [
    {
      "perspective": "ç†è«–åŸºç¤",
      "question": "å•é¡Œ1",
      "learning_value": "..."
    }
  ]
```

---

## **åœ¨å¾ŒçºŒç¯€é»ä¸­å¦‚ä½•ä½¿ç”¨ï¼š**

### **ä½¿ç”¨ Array[String]ï¼š**
```jinja2
{% for question in Parse_JSON.extended_questions_list %}
  {{loop.index}}. {{question}}
{% endfor %}
```

è¼¸å‡ºï¼š
```
1. ç›£ç£å­¸ç¿’å’Œéç›£ç£å­¸ç¿’çš„å€åˆ¥ï¼Ÿ
2. å¦‚ä½•é¸æ“‡åˆé©çš„æ©Ÿå™¨å­¸ç¿’ç®—æ³•ï¼Ÿ
3. æ©Ÿå™¨å­¸ç¿’åœ¨å¯¦éš›æ‡‰ç”¨ä¸­çš„æŒ‘æˆ°ï¼Ÿ
```

### **ä½¿ç”¨ Array[Object]ï¼š**
```jinja2
{% for item in Parse_JSON.extended_questions_full %}
  ã€{{item.perspective}}ã€‘
  å•é¡Œï¼š{{item.question}}
  åƒ¹å€¼ï¼š{{item.learning_value}}
{% endfor %}
```

è¼¸å‡ºï¼š
```
ã€ç†è«–åŸºç¤ã€‘
å•é¡Œï¼šç›£ç£å­¸ç¿’å’Œéç›£ç£å­¸ç¿’çš„å€åˆ¥ï¼Ÿ
åƒ¹å€¼ï¼šç†è§£ä¸åŒå­¸ç¿’ç¯„å¼çš„æœ¬è³ªå·®ç•°
```

---

## **å¿«é€Ÿç¸½çµï¼š**

âœ… **`extended_questions_list` é¸æ“‡ï¼šArray[String]**

é€™æ˜¯æœ€ç°¡å–®ç›´æ¥çš„é¸æ“‡ï¼Œé©åˆï¼š
- åœ¨ Prompt ä¸­åˆ—å‡ºå•é¡Œ
- ç°¡å–®çš„éæ­·é¡¯ç¤º
- å‚³éçµ¦å¾ŒçºŒ LLM è™•ç†

å¦‚æœéœ€è¦æ›´å¤šè³‡è¨Šï¼ˆå¦‚å•é¡Œçš„åˆ†é¡ã€å­¸ç¿’åƒ¹å€¼ç­‰ï¼‰ï¼Œå†è€ƒæ…®æ·»åŠ  `Array[Object]` é¡å‹çš„è®Šæ•¸ã€‚

éœ€è¦æˆ‘èªªæ˜å¦‚ä½•ä½¿ç”¨é€™äº›é™£åˆ—å—ï¼Ÿ
